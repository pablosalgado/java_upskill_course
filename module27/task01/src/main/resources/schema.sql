DROP TABLE user_accounts;
DROP TABLE events;
DROP TABLE users;
DROP TABLE tickets;

CREATE TABLE events (
	id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	"date" timestamp(6) NULL,
	ticket_price numeric(38, 2) NULL,
	title varchar(255) NULL,
	CONSTRAINT events_pkey PRIMARY KEY (id)
);

CREATE TABLE users (
	id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	email varchar(255) NULL,
	"name" varchar(255) NULL,
	CONSTRAINT users_pkey PRIMARY KEY (id)
);

CREATE TABLE tickets (
	id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	category int2 NULL,
	place int4 NOT NULL,
	event_id int8 NULL,
	user_id int8 NULL,
	CONSTRAINT tickets_category_check CHECK (((category >= 0) AND (category <= 2))),
	CONSTRAINT tickets_pkey PRIMARY KEY (id),
	CONSTRAINT fk3utafe14rupaypjocldjaj4ol FOREIGN KEY (event_id) REFERENCES events(id),
	CONSTRAINT fk4eqsebpimnjen0q46ja6fl2hl FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE TABLE user_accounts (
	id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	balance numeric(38, 2) NULL,
	user_id int8 NULL,
	CONSTRAINT uk8o642jss0gbxconmpyu9hke6m UNIQUE (user_id),
	CONSTRAINT user_accounts_pkey PRIMARY KEY (id),
	CONSTRAINT fkeu175seh3s7swirv0s1ugieyu FOREIGN KEY (user_id) REFERENCES users(id)
);